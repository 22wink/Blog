import{_ as L,B as c,w as N,o as _,c as g,b as a,e as o,a as m,z,l as h,bG as E,bp as U,k as y,b0 as V,h as F,d as A,F as P,n as R,Y as $,s as G,bH as H,bI as S}from"./index-7cf17b50.js";const T={class:"el-upload-list__item-actions"},Y=["onClick"],j=["onClick"],q={__name:"upload",props:{fileList:{type:Array,default:()=>{}},limit:{type:Number,default:1},preview:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},width:{type:Number,default:200},height:{type:Number,default:200}},emits:["update:fileList","change"],setup(i,{emit:d}){const r=i,p=c(!1),f=c(0),e=c([]),u=c(!0),x=()=>{R(()=>{e.value.length>=r.limit&&(u.value=!1),d("change",e.value),d("update:fileList",e.value)})};function w(l){const n=e.value.findIndex(t=>t.uid==l.uid);f.value=n,p.value=!0}function k(){f.value=0,p.value=!1}const b=async l=>{if(l){const{url:n}=l,t=e.value.findIndex(v=>v.url==n);t!=-1&&e.value.splice(t,1),u.value=!0,d("change",e.value),d("update:fileList",e.value)}};return N(()=>r.fileList,l=>{e.value=l,l.length>=r.limit&&(u.value=!1),l.length||(u.value=!0)},{immediate:!0,deep:!0}),(l,n)=>{const t=$,v=G,C=H,I=S;return _(),g(P,null,[a(C,{ref:"uploadAvatarRef","file-list":e.value,"onUpdate:fileList":n[0]||(n[0]=s=>e.value=s),class:F([u.value&&!i.preview?"":"hide-upload"]),action:"#","list-type":"picture-card","auto-upload":!1,multiple:i.multiple,limit:i.limit,"on-change":x},{file:o(({file:s})=>[m("div",null,[a(v,{style:z({width:i.width+"px",height:i.height+"px"}),fit:"cover",src:s.url,lazy:""},null,8,["style","src"]),m("span",T,[m("span",{class:"el-upload-list__item-preview",onClick:B=>w(s)},[a(t,null,{default:o(()=>[a(h(E))]),_:1})],8,Y),i.preview?y("",!0):(_(),g("span",{key:0,class:"el-upload-list__item-delete",onClick:B=>b(s)},[a(t,null,{default:o(()=>[a(h(U))]),_:1})],8,j))])])]),default:o(()=>[a(t,null,{default:o(()=>[a(h(V))]),_:1})]),_:1},8,["file-list","class","multiple","limit"]),p.value?(_(),A(I,{key:0,teleported:!0,"url-list":e.value.map(s=>s.url),"initial-index":f.value,onClose:k},null,8,["url-list","initial-index"])):y("",!0)],64)}}},J=L(q,[["__scopeId","data-v-4e14e929"]]);export{J as U};
