import{U as He,a3 as Pe,bu as Ue,a7 as we,R as Z,B as C,I as G,w as I,W as N,aa as $e,bv as me,aT as ne,Q as z,o as y,c as S,a as p,h as b,l as i,z as A,Z as J,aD as De,b1 as pe,b3 as ce,aC as ue,a6 as Ke,bw as Ce,ag as Re,ae as je,F as j,f as q,bx as qe,by as Xe,aE as Ye,bz as Ze,bA as Ge,L as ze,bB as Je,n as ee,S as Qe,d as x,e as T,j as de,b as L,k as le,aL as et,bC as Me,aN as ve,J as oe,t as P,Y as Ee,bD as tt,b6 as Se,aZ as at,bg as lt,bE as Le,$ as st,_ as ot,u as nt,al as rt,K as it,an as ct,aI as ut,aq as te,T as ae,aH as dt,aJ as ft,aQ as Te,E as ht,bF as pt,bl as vt,G as mt,x as gt,y as bt}from"./index-7cf17b50.js";import{C as _t,E as kt,a as yt}from"./el-select-a54a04c3.js";import{u as wt,b as $t,a as Ct}from"./message-49d65dd6.js";import{U as Mt}from"./upload-88d520b9.js";import"./strings-111307c0.js";const Et=He({color:{type:Pe(Object),required:!0},vertical:{type:Boolean,default:!1}});let fe=!1;function Y(e,l){if(!Ue)return;const a=function(s){var n;(n=l.drag)==null||n.call(l,s)},t=function(s){var n;document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",t),document.onselectstart=null,document.ondragstart=null,fe=!1,(n=l.end)==null||n.call(l,s)},r=function(s){var n;fe||(s.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",a),document.addEventListener("mouseup",t),document.addEventListener("touchmove",a),document.addEventListener("touchend",t),fe=!0,(n=l.start)==null||n.call(l,s))};e.addEventListener("mousedown",r),e.addEventListener("touchstart",r)}const St=e=>{const l=ne(),a=we(),t=we();function r(n){n.target!==a.value&&s(n)}function s(n){if(!t.value||!a.value)return;const o=l.vnode.el.getBoundingClientRect(),{clientX:f,clientY:w}=me(n);if(e.vertical){let u=w-o.top;u=Math.max(a.value.offsetHeight/2,u),u=Math.min(u,o.height-a.value.offsetHeight/2),e.color.set("alpha",Math.round((u-a.value.offsetHeight/2)/(o.height-a.value.offsetHeight)*100))}else{let u=f-o.left;u=Math.max(a.value.offsetWidth/2,u),u=Math.min(u,o.width-a.value.offsetWidth/2),e.color.set("alpha",Math.round((u-a.value.offsetWidth/2)/(o.width-a.value.offsetWidth)*100))}}return{thumb:a,bar:t,handleDrag:s,handleClick:r}},Lt=(e,{bar:l,thumb:a,handleDrag:t})=>{const r=ne(),s=Z("color-alpha-slider"),n=C(0),d=C(0),o=C();function f(){if(!a.value||e.vertical)return 0;const c=r.vnode.el,h=e.color.get("alpha");return c?Math.round(h*(c.offsetWidth-a.value.offsetWidth/2)/100):0}function w(){if(!a.value)return 0;const c=r.vnode.el;if(!e.vertical)return 0;const h=e.color.get("alpha");return c?Math.round(h*(c.offsetHeight-a.value.offsetHeight/2)/100):0}function u(){if(e.color&&e.color.value){const{r:c,g:h,b:O}=e.color.toRgb();return`linear-gradient(to right, rgba(${c}, ${h}, ${O}, 0) 0%, rgba(${c}, ${h}, ${O}, 1) 100%)`}return""}function E(){n.value=f(),d.value=w(),o.value=u()}G(()=>{if(!l.value||!a.value)return;const c={drag:h=>{t(h)},end:h=>{t(h)}};Y(l.value,c),Y(a.value,c),E()}),I(()=>e.color.get("alpha"),()=>E()),I(()=>e.color.value,()=>E());const _=N(()=>[s.b(),s.is("vertical",e.vertical)]),k=N(()=>s.e("bar")),$=N(()=>s.e("thumb")),M=N(()=>({background:o.value})),v=N(()=>({left:$e(n.value),top:$e(d.value)}));return{rootKls:_,barKls:k,barStyle:M,thumbKls:$,thumbStyle:v,update:E}},Tt="ElColorAlphaSlider",Nt=z({name:Tt}),Vt=z({...Nt,props:Et,setup(e,{expose:l}){const a=e,{bar:t,thumb:r,handleDrag:s,handleClick:n}=St(a),{rootKls:d,barKls:o,barStyle:f,thumbKls:w,thumbStyle:u,update:E}=Lt(a,{bar:t,thumb:r,handleDrag:s});return l({update:E,bar:t,thumb:r}),(_,k)=>(y(),S("div",{class:b(i(d))},[p("div",{ref_key:"bar",ref:t,class:b(i(o)),style:A(i(f)),onClick:k[0]||(k[0]=(...$)=>i(n)&&i(n)(...$))},null,6),p("div",{ref_key:"thumb",ref:r,class:b(i(w)),style:A(i(u))},null,6)],2))}});var At=J(Vt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue"]]);const It=z({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const l=Z("color-hue-slider"),a=ne(),t=C(),r=C(),s=C(0),n=C(0),d=N(()=>e.color.get("hue"));I(()=>d.value,()=>{E()});function o(_){_.target!==t.value&&f(_)}function f(_){if(!r.value||!t.value)return;const $=a.vnode.el.getBoundingClientRect(),{clientX:M,clientY:v}=me(_);let c;if(e.vertical){let h=v-$.top;h=Math.min(h,$.height-t.value.offsetHeight/2),h=Math.max(t.value.offsetHeight/2,h),c=Math.round((h-t.value.offsetHeight/2)/($.height-t.value.offsetHeight)*360)}else{let h=M-$.left;h=Math.min(h,$.width-t.value.offsetWidth/2),h=Math.max(t.value.offsetWidth/2,h),c=Math.round((h-t.value.offsetWidth/2)/($.width-t.value.offsetWidth)*360)}e.color.set("hue",c)}function w(){if(!t.value)return 0;const _=a.vnode.el;if(e.vertical)return 0;const k=e.color.get("hue");return _?Math.round(k*(_.offsetWidth-t.value.offsetWidth/2)/360):0}function u(){if(!t.value)return 0;const _=a.vnode.el;if(!e.vertical)return 0;const k=e.color.get("hue");return _?Math.round(k*(_.offsetHeight-t.value.offsetHeight/2)/360):0}function E(){s.value=w(),n.value=u()}return G(()=>{if(!r.value||!t.value)return;const _={drag:k=>{f(k)},end:k=>{f(k)}};Y(r.value,_),Y(t.value,_),E()}),{bar:r,thumb:t,thumbLeft:s,thumbTop:n,hueValue:d,handleClick:o,update:E,ns:l}}});function Ft(e,l,a,t,r,s){return y(),S("div",{class:b([e.ns.b(),e.ns.is("vertical",e.vertical)])},[p("div",{ref:"bar",class:b(e.ns.e("bar")),onClick:l[0]||(l[0]=(...n)=>e.handleClick&&e.handleClick(...n))},null,2),p("div",{ref:"thumb",class:b(e.ns.e("thumb")),style:A({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var Ht=J(It,[["render",Ft],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue"]]);const Pt=He({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:De,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:Pe(Array)},validateEvent:{type:Boolean,default:!0}}),zt={[pe]:e=>ce(e)||ue(e),[Ke]:e=>ce(e)||ue(e),activeChange:e=>ce(e)||ue(e)},Oe=Symbol("colorPickerContextKey"),Ne=function(e,l,a){return[e,l*a/((e=(2-l)*a)<1?e:2-e)||0,e/2]},Ot=function(e){return typeof e=="string"&&e.includes(".")&&Number.parseFloat(e)===1},xt=function(e){return typeof e=="string"&&e.includes("%")},B=function(e,l){Ot(e)&&(e="100%");const a=xt(e);return e=Math.min(l,Math.max(0,Number.parseFloat(`${e}`))),a&&(e=Number.parseInt(`${e*l}`,10)/100),Math.abs(e-l)<1e-6?1:e%l/Number.parseFloat(l)},Ve={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},se=e=>{e=Math.min(Math.round(e),255);const l=Math.floor(e/16),a=e%16;return`${Ve[l]||l}${Ve[a]||a}`},Ae=function({r:e,g:l,b:a}){return Number.isNaN(+e)||Number.isNaN(+l)||Number.isNaN(+a)?"":`#${se(e)}${se(l)}${se(a)}`},he={A:10,B:11,C:12,D:13,E:14,F:15},H=function(e){return e.length===2?(he[e[0].toUpperCase()]||+e[0])*16+(he[e[1].toUpperCase()]||+e[1]):he[e[1].toUpperCase()]||+e[1]},Bt=function(e,l,a){l=l/100,a=a/100;let t=l;const r=Math.max(a,.01);a*=2,l*=a<=1?a:2-a,t*=r<=1?r:2-r;const s=(a+l)/2,n=a===0?2*t/(r+t):2*l/(a+l);return{h:e,s:n*100,v:s*100}},Ie=(e,l,a)=>{e=B(e,255),l=B(l,255),a=B(a,255);const t=Math.max(e,l,a),r=Math.min(e,l,a);let s;const n=t,d=t-r,o=t===0?0:d/t;if(t===r)s=0;else{switch(t){case e:{s=(l-a)/d+(l<a?6:0);break}case l:{s=(a-e)/d+2;break}case a:{s=(e-l)/d+4;break}}s/=6}return{h:s*360,s:o*100,v:n*100}},R=function(e,l,a){e=B(e,360)*6,l=B(l,100),a=B(a,100);const t=Math.floor(e),r=e-t,s=a*(1-l),n=a*(1-r*l),d=a*(1-(1-r)*l),o=t%6,f=[a,n,s,s,d,a][o],w=[d,a,a,n,s,s][o],u=[s,s,d,a,a,n][o];return{r:Math.round(f*255),g:Math.round(w*255),b:Math.round(u*255)}};class X{constructor(l={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const a in l)Ce(l,a)&&(this[a]=l[a]);l.value?this.fromString(l.value):this.doOnChange()}set(l,a){if(arguments.length===1&&typeof l=="object"){for(const t in l)Ce(l,t)&&this.set(t,l[t]);return}this[`_${l}`]=a,this.doOnChange()}get(l){return l==="alpha"?Math.floor(this[`_${l}`]):this[`_${l}`]}toRgb(){return R(this._hue,this._saturation,this._value)}fromString(l){if(!l){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const a=(t,r,s)=>{this._hue=Math.max(0,Math.min(360,t)),this._saturation=Math.max(0,Math.min(100,r)),this._value=Math.max(0,Math.min(100,s)),this.doOnChange()};if(l.includes("hsl")){const t=l.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:r,s,v:n}=Bt(t[0],t[1],t[2]);a(r,s,n)}}else if(l.includes("hsv")){const t=l.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3&&a(t[0],t[1],t[2])}else if(l.includes("rgb")){const t=l.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:r,s,v:n}=Ie(t[0],t[1],t[2]);a(r,s,n)}}else if(l.includes("#")){const t=l.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(t))return;let r,s,n;t.length===3?(r=H(t[0]+t[0]),s=H(t[1]+t[1]),n=H(t[2]+t[2])):(t.length===6||t.length===8)&&(r=H(t.slice(0,2)),s=H(t.slice(2,4)),n=H(t.slice(4,6))),t.length===8?this._alpha=H(t.slice(6))/255*100:(t.length===3||t.length===6)&&(this._alpha=100);const{h:d,s:o,v:f}=Ie(r,s,n);a(d,o,f)}}compare(l){return Math.abs(l._hue-this._hue)<2&&Math.abs(l._saturation-this._saturation)<1&&Math.abs(l._value-this._value)<1&&Math.abs(l._alpha-this._alpha)<1}doOnChange(){const{_hue:l,_saturation:a,_value:t,_alpha:r,format:s}=this;if(this.enableAlpha)switch(s){case"hsl":{const n=Ne(l,a/100,t/100);this.value=`hsla(${l}, ${Math.round(n[1]*100)}%, ${Math.round(n[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${l}, ${Math.round(a)}%, ${Math.round(t)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${Ae(R(l,a,t))}${se(r*255/100)}`;break}default:{const{r:n,g:d,b:o}=R(l,a,t);this.value=`rgba(${n}, ${d}, ${o}, ${this.get("alpha")/100})`}}else switch(s){case"hsl":{const n=Ne(l,a/100,t/100);this.value=`hsl(${l}, ${Math.round(n[1]*100)}%, ${Math.round(n[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${l}, ${Math.round(a)}%, ${Math.round(t)}%)`;break}case"rgb":{const{r:n,g:d,b:o}=R(l,a,t);this.value=`rgb(${n}, ${d}, ${o})`;break}default:this.value=Ae(R(l,a,t))}}}const Wt=z({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const l=Z("color-predefine"),{currentColor:a}=Re(Oe),t=C(s(e.colors,e.color));I(()=>a.value,n=>{const d=new X;d.fromString(n),t.value.forEach(o=>{o.selected=d.compare(o)})}),je(()=>{t.value=s(e.colors,e.color)});function r(n){e.color.fromString(e.colors[n])}function s(n,d){return n.map(o=>{const f=new X;return f.enableAlpha=!0,f.format="rgba",f.fromString(o),f.selected=f.value===d.value,f})}return{rgbaColors:t,handleSelect:r,ns:l}}}),Ut=["onClick"];function Dt(e,l,a,t,r,s){return y(),S("div",{class:b(e.ns.b())},[p("div",{class:b(e.ns.e("colors"))},[(y(!0),S(j,null,q(e.rgbaColors,(n,d)=>(y(),S("div",{key:e.colors[d],class:b([e.ns.e("color-selector"),e.ns.is("alpha",n._alpha<100),{selected:n.selected}]),onClick:o=>e.handleSelect(d)},[p("div",{style:A({backgroundColor:n.value})},null,4)],10,Ut))),128))],2)],2)}var Kt=J(Wt,[["render",Dt],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue"]]);const Rt=z({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const l=Z("color-svpanel"),a=ne(),t=C(0),r=C(0),s=C("hsl(0, 100%, 50%)"),n=N(()=>{const f=e.color.get("hue"),w=e.color.get("value");return{hue:f,value:w}});function d(){const f=e.color.get("saturation"),w=e.color.get("value"),u=a.vnode.el,{clientWidth:E,clientHeight:_}=u;r.value=f*E/100,t.value=(100-w)*_/100,s.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function o(f){const u=a.vnode.el.getBoundingClientRect(),{clientX:E,clientY:_}=me(f);let k=E-u.left,$=_-u.top;k=Math.max(0,k),k=Math.min(k,u.width),$=Math.max(0,$),$=Math.min($,u.height),r.value=k,t.value=$,e.color.set({saturation:k/u.width*100,value:100-$/u.height*100})}return I(()=>n.value,()=>{d()}),G(()=>{Y(a.vnode.el,{drag:f=>{o(f)},end:f=>{o(f)}}),d()}),{cursorTop:t,cursorLeft:r,background:s,colorValue:n,handleDrag:o,update:d,ns:l}}}),jt=p("div",null,null,-1),qt=[jt];function Xt(e,l,a,t,r,s){return y(),S("div",{class:b(e.ns.b()),style:A({backgroundColor:e.background})},[p("div",{class:b(e.ns.e("white"))},null,2),p("div",{class:b(e.ns.e("black"))},null,2),p("div",{class:b(e.ns.e("cursor")),style:A({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},qt,6)],6)}var Yt=J(Rt,[["render",Xt],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue"]]);const Zt=["id","aria-label","aria-labelledby","aria-description","tabindex","onKeydown"],Gt=z({name:"ElColorPicker"}),Jt=z({...Gt,props:Pt,emits:zt,setup(e,{expose:l,emit:a}){const t=e,{t:r}=qe(),s=Z("color"),{formItem:n}=Xe(),d=Ye(),o=Ze(),{inputId:f,isLabeledByFormItem:w}=Ge(t,{formItemContext:n}),u=C(),E=C(),_=C(),k=C();let $=!0;const M=ze(new X({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue})),v=C(!1),c=C(!1),h=C(""),O=N(()=>!t.modelValue&&!c.value?"transparent":re(M,t.showAlpha)),W=N(()=>!t.modelValue&&!c.value?"":M.value),Q=N(()=>w.value?void 0:t.label||r("el.colorpicker.defaultLabel")),U=N(()=>w.value?n==null?void 0:n.labelId:void 0),D=N(()=>[s.b("picker"),s.is("disabled",o.value),s.bm("picker",d.value)]);function re(g,V){if(!(g instanceof X))throw new TypeError("color should be instance of _color Class");const{r:F,g:ke,b:ye}=g.toRgb();return V?`rgba(${F}, ${ke}, ${ye}, ${g.get("alpha")/100})`:`rgb(${F}, ${ke}, ${ye})`}function m(g){v.value=g}const K=Je(m,100);function xe(){o.value||m(!0)}function ge(){K(!1),ie()}function ie(){ee(()=>{t.modelValue?M.fromString(t.modelValue):(M.value="",ee(()=>{c.value=!1}))})}function be(){o.value||K(!v.value)}function _e(){M.fromString(h.value)}function Be(){const g=M.value;a(pe,g),a("change",g),t.validateEvent&&(n==null||n.validate("change").catch(V=>Le())),K(!1),ee(()=>{const V=new X({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue});M.compare(V)||ie()})}function We(){K(!1),a(pe,null),a("change",null),t.modelValue!==null&&t.validateEvent&&(n==null||n.validate("change").catch(g=>Le())),ie()}return G(()=>{t.modelValue&&(h.value=W.value)}),I(()=>t.modelValue,g=>{g?g&&g!==M.value&&($=!1,M.fromString(g)):c.value=!1}),I(()=>W.value,g=>{h.value=g,$&&a("activeChange",g),$=!0}),I(()=>M.value,()=>{!t.modelValue&&!c.value&&(c.value=!0)}),I(()=>v.value,()=>{ee(()=>{var g,V,F;(g=u.value)==null||g.update(),(V=E.value)==null||V.update(),(F=_.value)==null||F.update()})}),Qe(Oe,{currentColor:W}),l({color:M,show:xe,hide:ge}),(g,V)=>(y(),x(i(lt),{ref_key:"popper",ref:k,visible:v.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[i(s).be("picker","panel"),i(s).b("dropdown"),g.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${i(s).namespace.value}-zoom-in-top`,persistent:""},{content:T(()=>[de((y(),S("div",null,[p("div",{class:b(i(s).be("dropdown","main-wrapper"))},[L(Ht,{ref_key:"hue",ref:u,class:"hue-slider",color:i(M),vertical:""},null,8,["color"]),L(Yt,{ref_key:"sv",ref:E,color:i(M)},null,8,["color"])],2),g.showAlpha?(y(),x(At,{key:0,ref_key:"alpha",ref:_,color:i(M)},null,8,["color"])):le("v-if",!0),g.predefine?(y(),x(Kt,{key:1,ref:"predefine",color:i(M),colors:g.predefine},null,8,["color","colors"])):le("v-if",!0),p("div",{class:b(i(s).be("dropdown","btns"))},[p("span",{class:b(i(s).be("dropdown","value"))},[L(i(et),{modelValue:h.value,"onUpdate:modelValue":V[0]||(V[0]=F=>h.value=F),"validate-event":!1,size:"small",onKeyup:Me(_e,["enter"]),onBlur:_e},null,8,["modelValue","onKeyup"])],2),L(i(ve),{class:b(i(s).be("dropdown","link-btn")),text:"",size:"small",onClick:We},{default:T(()=>[oe(P(i(r)("el.colorpicker.clear")),1)]),_:1},8,["class"]),L(i(ve),{plain:"",size:"small",class:b(i(s).be("dropdown","btn")),onClick:Be},{default:T(()=>[oe(P(i(r)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)])),[[i(_t),ge]])]),default:T(()=>[p("div",{id:i(f),class:b(i(D)),role:"button","aria-label":i(Q),"aria-labelledby":i(U),"aria-description":i(r)("el.colorpicker.description",{color:g.modelValue||""}),tabindex:g.tabindex,onKeydown:Me(be,["enter"])},[i(o)?(y(),S("div",{key:0,class:b(i(s).be("picker","mask"))},null,2)):le("v-if",!0),p("div",{class:b(i(s).be("picker","trigger")),onClick:be},[p("span",{class:b([i(s).be("picker","color"),i(s).is("alpha",g.showAlpha)])},[p("span",{class:b(i(s).be("picker","color-inner")),style:A({backgroundColor:i(O)})},[de(L(i(Ee),{class:b([i(s).be("picker","icon"),i(s).is("icon-arrow-down")])},{default:T(()=>[L(i(tt))]),_:1},8,["class"]),[[Se,g.modelValue||c.value]]),de(L(i(Ee),{class:b([i(s).be("picker","empty"),i(s).is("icon-close")])},{default:T(()=>[L(i(at))]),_:1},8,["class"]),[[Se,!g.modelValue&&!c.value]])],6)],2)],2)],42,Zt)]),_:1},8,["visible","popper-class","transition"]))}});var Qt=J(Jt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue"]]);const ea=st(Qt);const ta=[{key:12},{key:14},{key:16},{key:18},{key:20},{key:22},{key:24},{key:28},{key:32},{key:36}],aa=[{key:400},{key:500},{key:600},{key:700},{key:800},{key:900}],Fe=["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgba(255, 69, 0, 0.68)","rgb(255, 120, 0)","hsv(51, 100, 98)","hsva(120, 40, 94, 0.5)","hsl(181, 100%, 37%)","hsla(209, 100%, 56%, 0.73)","#c7158577"],la=[{key:0,label:"背景颜色"},{key:1,label:"字体"},{key:2,label:"背景图片"},{key:3,label:"标签"}];const sa=e=>(gt("data-v-b0a26f93"),e=e(),bt(),e),oa={class:"message"},na={class:"center_box !pt-[80px]"},ra={class:"flex items-center justify-center !h-[1rem]"},ia={class:"top-header"},ca={class:"flex items-center"},ua={class:"nick-name"},da={class:"bottom"},fa={class:"tag"},ha={class:"!mt-[10px] !h-[20rem]"},pa={class:"tab"},va=["onClick"],ma={class:"!h-[12rem] !p-[15px]"},ga={key:0},ba={key:1,class:"flex items-center"},_a={key:2},ka={key:3},ya={class:"!h-[4rem] !p-[15px] flex justify-center items-center"},wa={key:0,class:"loading"},$a=sa(()=>p("div",{class:"coffee_cup"},null,-1)),Ca=[$a],Ma={__name:"publish",setup(e){const l=nt(),a=rt(),t=it(),{getUserInfo:r}=ct(t),s=C(!1),n=C([]);function d(v){var c;window.getSelection?(v.focus(),c=window.getSelection(),c.selectAllChildren(v),c.collapseToEnd()):document.selection&&(c=document.selection.createRange(),c.moveToElementText(v),c.collapse(!1),c.select())}const o=ze({id:0,message:"",color:"#676767",font_size:16,font_weight:500,bg_color:"transparent",bg_url:"",user_id:0,tag:"",nick_name:"",bgList:[]}),f=Object.assign({...o}),w=C(0),u=C(""),E=pt(()=>{o.message=u.value.innerHTML},100),_=()=>{u.value.innerHTML=="留下点什么再走吧~"&&(u.value.innerHTML=""),d(u.value)},k=async()=>{if(!o.message){te({offset:60,title:"温馨提示",message:ae("div",{style:"color: #e6c081; font-weight: 600;"},"留言内容不能为空")});return}if(!o.tag){te({offset:60,title:"温馨提示",message:ae("div",{style:"color: #e6c081; font-weight: 600;"},"请选择标签，没有标签可以自行创建")});return}if(o.id||(o.user_id=r.value.id),s.value=!0,o.bgList.length&&!o.bgList[0].id){const c=await dt(o.bgList[0]);if(c.code==0){const{url:h}=c.result;o.bg_url=h}}let v;o.id?v=await wt(o):v=await $t(o),v&&v.code==0?(te({offset:60,title:"提示",message:ae("div",{style:"color: #7ec050; font-weight: 600;"},o.id?"修改成功":"留言成功")}),Object.assign(o,f),s.value=!1,ft("blog-message-item"),Te("message-refresh",!0),Te("message-need-scroll",!0),l.go(-1)):te({offset:60,title:"错误提示",message:ae("div",{style:"color: #f56c6c; font-weight: 600;"},v.message)})},$=async()=>{const v=await Ct();v.code==0&&(n.value=Array.isArray(v.result)?v.result.map((c,h)=>({key:h+1,label:c.tag})):[])},M=v=>{w.value=v};return G(async()=>{if(await $(),a.query.type=="edit"){const v=ut("blog-message-item");v&&(Object.assign(o,v),v.bg_url&&(o.bgList=[{id:1,name:v.bg_url.split("/").slice(-1),url:v.bg_url}])),u.value&&(u.value.innerHTML=o.message)}else u.value&&(u.value.innerHTML="留下点什么再走吧~"),o.nick_name=r.value.nick_name||"游客",o.avatar=r.value.avatar||"游客",Array.isArray(n.value)&&n.value.length>0&&(o.tag=n.value[0].label)}),(v,c)=>{const h=vt,O=mt,W=ht,Q=ea,U=yt,D=kt,re=ve;return y(),S("div",oa,[p("div",na,[p("div",ra,[L(h,{size:"1.2rem",typeList:["世间真假，皆我所求，苦与乐，都可奉酒。"]})]),L(W,{class:"!mt-[2rem]"},{default:T(()=>[p("div",{class:"!h-[22rem]",style:A({backgroundColor:o.bg_color})},[p("div",{class:"top",style:A({backgroundImage:o.bg_url?`url(${o.bg_url})`:""})},[p("div",ia,[p("div",ca,[L(O,{class:"left-avatar",src:o.avatar},{default:T(()=>[oe(P(o.nick_name),1)]),_:1},8,["src"]),p("span",ua,P(o.nick_name),1)])]),p("div",{class:"content",style:A({color:o.color,fontSize:o.font_size+"px",fontWeight:o.font_weight}),ref_key:"inputCommentRef",ref:u,contenteditable:"true",onInput:c[0]||(c[0]=m=>i(E)(v.val)),onFocus:_},null,36)],4),p("div",da,[p("div",fa,P(o.tag),1)])],4)]),_:1}),p("div",ha,[p("ul",pa,[(y(!0),S(j,null,q(i(la),m=>(y(),S("li",{key:m.key,onClick:K=>M(m.key)},[p("div",{class:b([m.key==w.value?"message-active-tab":"","tab-li"])},P(m.label),3)],8,va))),128))]),p("div",ma,[w.value==0?(y(),S("div",ga,[L(Q,{modelValue:o.bg_color,"onUpdate:modelValue":c[1]||(c[1]=m=>o.bg_color=m),"show-alpha":"",predefine:i(Fe)},null,8,["modelValue","predefine"])])):w.value==1?(y(),S("div",ba,[L(D,{modelValue:o.font_size,"onUpdate:modelValue":c[2]||(c[2]=m=>o.font_size=m),class:"!w-[160px] !mr-[20px]",placeholder:"请选择字体大小",size:"large"},{default:T(()=>[(y(!0),S(j,null,q(i(ta),m=>(y(),x(U,{key:m.key,label:m.key,value:m.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),L(Q,{modelValue:o.color,"onUpdate:modelValue":c[3]||(c[3]=m=>o.color=m),"show-alpha":"",predefine:i(Fe)},null,8,["modelValue","predefine"]),L(D,{modelValue:o.font_weight,"onUpdate:modelValue":c[4]||(c[4]=m=>o.font_weight=m),class:"!w-[160px] !ml-[20px]",placeholder:"请选择字体宽度",size:"large"},{default:T(()=>[(y(!0),S(j,null,q(i(aa),m=>(y(),x(U,{key:m.key,label:m.key,value:m.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])):w.value==2?(y(),S("div",_a,[L(Mt,{"file-list":o.bgList,"onUpdate:fileList":c[5]||(c[5]=m=>o.bgList=m),limit:1,width:280,height:140,preview:!1},null,8,["file-list"])])):(y(),S("div",ka,[L(D,{modelValue:o.tag,"onUpdate:modelValue":c[6]||(c[6]=m=>o.tag=m),class:"!w-[180px]",placeholder:"请选择或输入标签",size:"large",filterable:"","allow-create":"",clearable:""},{default:T(()=>[(y(!0),S(j,null,q(n.value,m=>(y(),x(U,{key:m.key,label:m.label,value:m.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]))]),p("div",ya,[L(re,{disabled:s.value,loading:s.value,class:"apply-button !w-[200px]",onClick:k},{default:T(()=>[oe(P(s.value?"努力上传中...":i(a).query.type=="edit"?"保存":"发布"),1)]),_:1},8,["disabled","loading"])])])]),s.value?(y(),S("div",wa,Ca)):le("",!0)])}}},Va=ot(Ma,[["__scopeId","data-v-b0a26f93"]]);export{Va as default};
