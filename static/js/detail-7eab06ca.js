import{_ as b}from"./Comment-a9548d85.js";import{_ as w,K as L,an as z,L as I,I as T,aI as C,c,a as t,b as l,e as r,d as M,k as E,aQ as d,E as H,o as n,z as o,J as N,t as a,l as m,bq as S,az as B,aq as f,T as g,G as V,q}from"./index-7cf17b50.js";import{c as R,l as j}from"./message-49d65dd6.js";import{c as A,a as W}from"./like-f669dd3b.js";import"./pagination-488bf88a.js";import"./el-select-a54a04c3.js";import"./strings-111307c0.js";const $={class:"message"},D={class:"center_box !pt-[80px]"},G={class:"top-header"},J={class:"flex items-center"},K={class:"nick-name"},O=["innerHTML"],Q={class:"bottom"},U={class:"left flex items-center"},F={class:"time"},P={class:"index-tag"},X={class:"flex justify-start items-center option"},Y={__name:"detail",setup(Z){const u=L(),{getUserInfo:_}=z(u),e=I({id:0,message:"",color:"",font_size:16,font_weight:500,bg_color:"",bg_url:"",user_id:0,tag:"",like_times:0,nick_name:"",avatar:"",is_like:!1}),p=async s=>{s.is_like?(await R(s.id)).code==0&&(await A({for_id:s.id,type:3,user_id:_.value.id}),s.like_times--,s.is_like=!1,f({offset:60,title:"提示",message:g("div",{style:"color: #7ec050; font-weight: 600;"},"已取消点赞")})):(await j(s.id)).code==0&&(await W({for_id:s.id,type:3,user_id:_.value.id}),s.like_times++,s.is_like=!0,f({offset:60,title:"提示",message:g("div",{style:"color: #7ec050; font-weight: 600;"},"点赞成功")})),d("message-refresh",!0)},k=()=>{d("message-refresh",!0)};return T(()=>{const s=C("blog-message-item");s&&Object.assign(e,s)}),(s,i)=>{const v=V,h=q,y=H,x=b;return n(),c("div",$,[t("div",D,[l(y,null,{default:r(()=>[t("div",{style:o({backgroundColor:e.bg_color}),class:"message-card animate__animated animate__fadeIn"},[t("div",{class:"top",style:o({backgroundImage:e.bg_url?`url(${e.bg_url})`:""})},[t("div",G,[t("div",J,[l(v,{class:"left-avatar",src:e.avatar},{default:r(()=>[N(a(e.nick_name),1)]),_:1},8,["src"]),t("span",K,a(e.nick_name),1)])]),m(S)(e.message)?(n(),c("div",{key:0,innerHTML:e.message,style:o({color:e.color,fontSize:e.font_size+"px",fontWeight:e.font_weight})},null,12,O)):(n(),c("div",{key:1,style:o({color:e.color,fontSize:e.font_size+"px",fontWeight:e.font_weight})},a(e.message),5))],4),t("div",Q,[t("div",U,[t("div",F,a(m(B)(e.createdAt))+"前",1),t("div",P,"#"+a(e.tag),1)]),t("div",X,[l(h,{name:e.is_like?"redHeart":"greyHeart",width:1.5,onClick:i[0]||(i[0]=ee=>p(e,s.index))},null,8,["name"]),t("span",{style:o({color:e.is_like?"#f00":""}),class:"!ml-[5px]"},a(e.like_times||0),5)])])],4)]),_:1}),e.id?(n(),M(x,{key:0,class:"w-[100%] !mt-[1rem]",type:"message",expand:!0,id:e.id,"author-id":e.user_id,onRefresh:k},null,8,["id","author-id"])):E("",!0)])])}}},le=w(Y,[["__scopeId","data-v-f9c34748"]]);export{le as default};
